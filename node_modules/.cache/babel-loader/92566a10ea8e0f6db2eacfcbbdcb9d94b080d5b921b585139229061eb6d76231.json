{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/Development/Project-system/src/components/chat/ChatContainer.jsx\",\n  _s = $RefreshSig$();\nimport { Button, Card, Input } from \"reactstrap\";\nimport { CrossIcon, MessageOptionIcon, ReplyIcon } from \"../../assets/designPickedIcons\";\nimport { RxCross2 } from \"react-icons/rx\";\nimport { IoAddCircleOutline, IoAlarmOutline, IoCall } from \"react-icons/io5\";\nimport { useEffect, useRef, useState } from \"react\";\nimport ChatBubble from \"./ChatBubble\";\nimport UserAvatar from \"./UserAvatar\";\nimport Booking from \"../inputs/Booking\";\nimport { IoIosAddCircleOutline } from \"react-icons/io\";\nimport AddToFavourities from \"../inputs/AddToFavourities\";\nimport OrderNowCard from \"../cards/OrderNowCard\";\nimport { Link } from \"react-router-dom\";\nimport OrderTemplateModal from \"./OrderTemplateModal\";\nimport VoiceCall from \"./VoiceCall\";\nimport CallBubble from \"./CallBubble\";\nimport moment from \"moment\";\nimport { PiCaretDown } from \"react-icons/pi\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatContainer = ({\n  chattingWith,\n  setChattingWith,\n  setisChatting\n}) => {\n  _s();\n  var _chattingWith$designa, _moment, _moment$subtract, _replyingTo$text, _replyingTo$text2;\n  const [bookModalOpen, setBookModalOpen] = useState(false);\n  const [isBooked, setisBooked] = useState(false);\n  const [orderTemplateModalOpen, setOrderTemplateModalOpen] = useState(false);\n  const toggleBookModal = () => setBookModalOpen(prev => !prev);\n  const [callObj, setCallObj] = useState({\n    state: \"idle\",\n    timeOfCall: 0,\n    index: 0,\n    type: \"call\"\n  });\n  const [messages, setMessages] = useState([{\n    from: chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id,\n    text: \"Hello there !\",\n    date: Date.now(),\n    id: 0\n  }, {\n    from: chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id,\n    text: \"I have something to discuss\",\n    date: Date.now(),\n    id: 1\n  }, {\n    from: \"\",\n    text: \"Hello there !\",\n    date: Date.now(),\n    id: 2\n  }, {\n    from: \"\",\n    text: \"Before you discuss ! i have to discuss something \",\n    date: Date.now(),\n    id: 6,\n    repliedTo: 1\n  }, {\n    from: \"\",\n    text: \"I have something to discuss\",\n    date: Date.now(),\n    id: 3\n  }, {\n    from: chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id,\n    link: \"/profile/settings?goTo=3\",\n    templateName: \"interior Design\",\n    date: Date.now(),\n    id: 4\n  }, {\n    from: chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id,\n    date: Date.now(),\n    id: 5,\n    text: \"Try replying to this message for that double line error , it should work as expected , and bla bla bla bla blka blas ablas\"\n  }]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const chatBodyRef = useRef();\n  const [replyingTo, setReplyingTo] = useState(null);\n  const [isAtBottom, setisAtBottom] = useState(false);\n\n  //focusing the element on replying\n  const inputElement = document.getElementById(\"message\");\n  useEffect(() => {\n    if (replyingTo && inputElement) {\n      inputElement === null || inputElement === void 0 ? void 0 : inputElement.focus();\n    }\n  }, [replyingTo]);\n  //\n\n  const handleSendMessage = () => {\n    var _Math$floor;\n    let obj = {\n      text: newMessage,\n      date: Date.now(),\n      id: `message-${(_Math$floor = Math.floor(Math.random() * 1000)) === null || _Math$floor === void 0 ? void 0 : _Math$floor.toString(16)}`,\n      repliedTo: replyingTo === null || replyingTo === void 0 ? void 0 : replyingTo.id\n    };\n    setMessages([...messages, obj]);\n    setNewMessage(\"\");\n    if (replyingTo) {\n      setReplyingTo(null);\n    }\n  };\n  const getRepliedTo = id => {\n    var _ref;\n    return (_ref = [...messages]) === null || _ref === void 0 ? void 0 : _ref.find(item => (item === null || item === void 0 ? void 0 : item.id) === id);\n  };\n\n  //-------------------------------------------------------\n  useEffect(() => {\n    if (chatBodyRef.current) {\n      var _chatBodyRef$current, _chatBodyRef$current2;\n      let scrollHeight = (_chatBodyRef$current = chatBodyRef.current) === null || _chatBodyRef$current === void 0 ? void 0 : _chatBodyRef$current.scrollHeight;\n      chatBodyRef === null || chatBodyRef === void 0 ? void 0 : (_chatBodyRef$current2 = chatBodyRef.current) === null || _chatBodyRef$current2 === void 0 ? void 0 : _chatBodyRef$current2.scrollTo({\n        top: scrollHeight,\n        behaviour: \"smooth\"\n      });\n    }\n  }, [messages]);\n  const scrollListener = e => {\n    if ((e === null || e === void 0 ? void 0 : e.scrollTop) < (e === null || e === void 0 ? void 0 : e.scrollHeight) - (e === null || e === void 0 ? void 0 : e.clientHeight)) {\n      setisAtBottom(false);\n    } else setisAtBottom(true);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"full-width d-flex align-items-center justify-content-between\",\n          style: {\n            padding: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex\",\n            children: [/*#__PURE__*/_jsxDEV(UserAvatar, {\n              isOnline: chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.isOnline,\n              height: 50,\n              width: 50,\n              src: chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.photo,\n              style: {\n                margin: \"2px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MessageOptionIcon, {\n              color: \"#555\",\n              hoverColor: \"#999999\",\n              className: \"cursor-pointer\",\n              onClick: () => {\n                setOrderTemplateModalOpen(true);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"color-7777 text-center m-0\",\n              children: chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"m-0 color-7777 text-center \",\n              children: (_chattingWith$designa = chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.designation) !== null && _chattingWith$designa !== void 0 ? _chattingWith$designa : \"Designer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setisChatting(false),\n            className: \"grey-btn-1 p-0 full-rounded border-none\",\n            style: {\n              height: \"50px\",\n              width: \"50px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(RxCross2, {\n              size: 50\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container-body d-flex flex-column py-3 px-2\",\n        ref: chatBodyRef,\n        style: {\n          gap: \"10px\"\n        },\n        onScroll: e => scrollListener(e === null || e === void 0 ? void 0 : e.target),\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"f-4 d-block color-7777 text-end\",\n          children: (_moment = moment(new Date())) === null || _moment === void 0 ? void 0 : (_moment$subtract = _moment.subtract(1, \"day\")) === null || _moment$subtract === void 0 ? void 0 : _moment$subtract.format(\"YYYY/MM/D ddd\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), messages === null || messages === void 0 ? void 0 : messages.map((messageObj, key) => {\n          if (messageObj !== null && messageObj !== void 0 && messageObj.templateName) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `d-flex full-width  align-items-center ${(chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id) === (messageObj === null || messageObj === void 0 ? void 0 : messageObj.from) ? \"justify-content-start\" : \"justify-content-end\"}`,\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: messageObj === null || messageObj === void 0 ? void 0 : messageObj.link,\n                className: \"text-decoration-none template\",\n                children: /*#__PURE__*/_jsxDEV(OrderNowCard, {\n                  details: {\n                    title: messageObj === null || messageObj === void 0 ? void 0 : messageObj.templateName\n                  },\n                  isEditable: false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this);\n          } else if ((messageObj === null || messageObj === void 0 ? void 0 : messageObj.type) === \"call\") {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `d-flex full-width  align-items-center ${(chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id) === (messageObj === null || messageObj === void 0 ? void 0 : messageObj.from) ? \"justify-content-start\" : \"justify-content-end\"}`,\n              children: /*#__PURE__*/_jsxDEV(CallBubble, {\n                onReply: () => setReplyingTo({\n                  ...messageObj,\n                  repliedTo: messageObj === null || messageObj === void 0 ? void 0 : messageObj.id,\n                  text: \"You were in a call \"\n                }),\n                state: messageObj === null || messageObj === void 0 ? void 0 : messageObj.state,\n                timeOfCall: messageObj === null || messageObj === void 0 ? void 0 : messageObj.timeOfCall,\n                type: (messageObj === null || messageObj === void 0 ? void 0 : messageObj.from) === (chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id) ? \"recieved\" : \"sent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this);\n          } else return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `d-flex  full-width align-items-center ${(chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id) === (messageObj === null || messageObj === void 0 ? void 0 : messageObj.from) ? \"justify-content-start\" : \"justify-content-end\"}`,\n            children: /*#__PURE__*/_jsxDEV(ChatBubble, {\n              repliedTo: getRepliedTo(messageObj === null || messageObj === void 0 ? void 0 : messageObj.repliedTo),\n              onReply: () => setReplyingTo(messageObj),\n              messageObj: messageObj,\n              type: (messageObj === null || messageObj === void 0 ? void 0 : messageObj.from) === (chattingWith === null || chattingWith === void 0 ? void 0 : chattingWith.id) ? \"recieved\" : \"sent\",\n              chatter: {\n                name: \"You\"\n              },\n              chattingWith: chattingWith\n            }, key, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" chat-container-input d-flex  position-relative\",\n        children: [isAtBottom ? /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            right: \"1%\",\n            top: \"-40%\"\n          },\n          className: \"bg-transparent position-absolute p-0 border-none hover-color-cyan color-5555 \",\n          children: /*#__PURE__*/_jsxDEV(IoIosAddCircleOutline, {\n            size: 30\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            if (chatBodyRef !== null && chatBodyRef !== void 0 && chatBodyRef.current) {\n              var _chatBodyRef$current3, _chatBodyRef$current4;\n              chatBodyRef === null || chatBodyRef === void 0 ? void 0 : (_chatBodyRef$current3 = chatBodyRef.current) === null || _chatBodyRef$current3 === void 0 ? void 0 : _chatBodyRef$current3.scrollTo({\n                top: chatBodyRef === null || chatBodyRef === void 0 ? void 0 : (_chatBodyRef$current4 = chatBodyRef.current) === null || _chatBodyRef$current4 === void 0 ? void 0 : _chatBodyRef$current4.scrollHeight,\n                behaviour: \"smooth\"\n              });\n            }\n          },\n          style: {\n            right: \"1%\",\n            top: \"-40%\",\n            borderRadius: \"50%\"\n          },\n          className: \"grey-btn-1 p-0 position-absolute  border-none \",\n          children: /*#__PURE__*/_jsxDEV(PiCaretDown, {\n            size: 30\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"full-width\",\n          children: [replyingTo && /*#__PURE__*/_jsxDEV(Card, {\n            className: \"m-1 reply-card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex align-items-center justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  gap: \"2px\"\n                },\n                className: \"d-flex align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(ReplyIcon, {\n                    size: 20\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"m-0 color-9999 text-start\",\n                  children: [replyingTo === null || replyingTo === void 0 ? void 0 : (_replyingTo$text = replyingTo.text) === null || _replyingTo$text === void 0 ? void 0 : _replyingTo$text.slice(0, 50), (replyingTo === null || replyingTo === void 0 ? void 0 : (_replyingTo$text2 = replyingTo.text) === null || _replyingTo$text2 === void 0 ? void 0 : _replyingTo$text2.length) > 50 ? \"....\" : null]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(CrossIcon, {\n                  size: 20,\n                  onClick: () => setReplyingTo(false)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"textarea\",\n            className: \"border-none \",\n            id: \"message\",\n            style: {\n              caretColor: \"#00C8C8\",\n              paddingLeft: \"8px\"\n            },\n            value: newMessage,\n            onChange: e => {\n              var _e$target;\n              return setNewMessage(e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value);\n            },\n            onKeyDownCapture: e => {\n              var _e$key;\n              if ((e === null || e === void 0 ? void 0 : (_e$key = e.key) === null || _e$key === void 0 ? void 0 : _e$key.toUpperCase()) == \"ENTER\" && e !== null && e !== void 0 && e.shiftKey) {\n                e === null || e === void 0 ? void 0 : e.preventDefault();\n                setNewMessage(newMessage + \"\\n\");\n              } else {\n                var _e$key2;\n                if ((e === null || e === void 0 ? void 0 : (_e$key2 = e.key) === null || _e$key2 === void 0 ? void 0 : _e$key2.toUpperCase()) == \"ENTER\") {\n                  e === null || e === void 0 ? void 0 : e.preventDefault();\n                  if (newMessage !== \"\") {\n                    handleSendMessage();\n                    setNewMessage(\"\");\n                  } else toast.error(\"Cannot send empty message\");\n                }\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"m-2\",\n          children: chattingWith !== null && chattingWith !== void 0 && chattingWith.isOnline ? /*#__PURE__*/_jsxDEV(VoiceCall, {\n            onCall: () => {},\n            onCallSuccess: timeOfCall => {\n              let obj = {\n                index: callObj === null || callObj === void 0 ? void 0 : callObj.index,\n                state: \"in-call\",\n                timeOfCall: timeOfCall,\n                type: \"call\"\n              };\n              let array = [...messages, obj];\n              setMessages(array);\n              setCallObj(obj);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleBookModal,\n            className: `${isBooked ? \"orange-btn-1\" : \"cyan-btn\"} full-rounded f-4 p-1 d-flex flex-column align-items-center justify-content-center`,\n            style: {\n              height: \"85px\",\n              width: \"85px\",\n              aspectRatio: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(IoAlarmOutline, {\n                size: 50\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"d-block\",\n              children: !isBooked ? \"Book\" : \"Booked\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Booking, {\n      onBookingSuccess: () => setisBooked(true),\n      isOpen: bookModalOpen,\n      toggle: toggleBookModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OrderTemplateModal, {\n      isOpen: orderTemplateModalOpen,\n      toggle: () => setOrderTemplateModalOpen(prev => !prev)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(ChatContainer, \"qjPr70Gw5akTf/mw9eiEcD2inJ8=\");\n_c = ChatContainer;\nexport default ChatContainer;\nvar _c;\n$RefreshReg$(_c, \"ChatContainer\");","map":{"version":3,"names":["Button","Card","Input","CrossIcon","MessageOptionIcon","ReplyIcon","RxCross2","IoAddCircleOutline","IoAlarmOutline","IoCall","useEffect","useRef","useState","ChatBubble","UserAvatar","Booking","IoIosAddCircleOutline","AddToFavourities","OrderNowCard","Link","OrderTemplateModal","VoiceCall","CallBubble","moment","PiCaretDown","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatContainer","chattingWith","setChattingWith","setisChatting","_s","_chattingWith$designa","_moment","_moment$subtract","_replyingTo$text","_replyingTo$text2","bookModalOpen","setBookModalOpen","isBooked","setisBooked","orderTemplateModalOpen","setOrderTemplateModalOpen","toggleBookModal","prev","callObj","setCallObj","state","timeOfCall","index","type","messages","setMessages","from","id","text","date","Date","now","repliedTo","link","templateName","newMessage","setNewMessage","chatBodyRef","replyingTo","setReplyingTo","isAtBottom","setisAtBottom","inputElement","document","getElementById","focus","handleSendMessage","_Math$floor","obj","Math","floor","random","toString","getRepliedTo","_ref","find","item","current","_chatBodyRef$current","_chatBodyRef$current2","scrollHeight","scrollTo","top","behaviour","scrollListener","e","scrollTop","clientHeight","children","className","style","padding","isOnline","height","width","src","photo","margin","fileName","_jsxFileName","lineNumber","columnNumber","color","hoverColor","onClick","name","designation","size","ref","gap","onScroll","target","subtract","format","map","messageObj","key","to","details","title","isEditable","onReply","chatter","right","_chatBodyRef$current3","_chatBodyRef$current4","borderRadius","slice","length","caretColor","paddingLeft","value","onChange","_e$target","onKeyDownCapture","_e$key","toUpperCase","shiftKey","preventDefault","_e$key2","error","onCall","onCallSuccess","array","aspectRatio","onBookingSuccess","isOpen","toggle","_c","$RefreshReg$"],"sources":["/Users/apple/Documents/Development/Project-system/src/components/chat/ChatContainer.jsx"],"sourcesContent":["import { Button, Card, Input } from \"reactstrap\";\r\nimport {\r\n  CrossIcon,\r\n  MessageOptionIcon,\r\n  ReplyIcon,\r\n} from \"../../assets/designPickedIcons\";\r\nimport { RxCross2 } from \"react-icons/rx\";\r\nimport { IoAddCircleOutline, IoAlarmOutline, IoCall } from \"react-icons/io5\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport ChatBubble from \"./ChatBubble\";\r\nimport UserAvatar from \"./UserAvatar\";\r\nimport Booking from \"../inputs/Booking\";\r\nimport { IoIosAddCircleOutline } from \"react-icons/io\";\r\nimport AddToFavourities from \"../inputs/AddToFavourities\";\r\nimport OrderNowCard from \"../cards/OrderNowCard\";\r\nimport { Link } from \"react-router-dom\";\r\nimport OrderTemplateModal from \"./OrderTemplateModal\";\r\nimport VoiceCall from \"./VoiceCall\";\r\nimport CallBubble from \"./CallBubble\";\r\nimport moment from \"moment\";\r\nimport { PiCaretDown } from \"react-icons/pi\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst ChatContainer = ({ chattingWith, setChattingWith, setisChatting }) => {\r\n  const [bookModalOpen, setBookModalOpen] = useState(false);\r\n  const [isBooked, setisBooked] = useState(false);\r\n  const [orderTemplateModalOpen, setOrderTemplateModalOpen] = useState(false);\r\n  const toggleBookModal = () => setBookModalOpen((prev) => !prev);\r\n  const [callObj, setCallObj] = useState({\r\n    state: \"idle\",\r\n    timeOfCall: 0,\r\n    index: 0,\r\n    type: \"call\",\r\n  });\r\n\r\n  const [messages, setMessages] = useState([\r\n    { from: chattingWith?.id, text: \"Hello there !\", date: Date.now(), id: 0 },\r\n    {\r\n      from: chattingWith?.id,\r\n      text: \"I have something to discuss\",\r\n      date: Date.now(),\r\n      id: 1,\r\n    },\r\n    { from: \"\", text: \"Hello there !\", date: Date.now(), id: 2 },\r\n    {\r\n      from: \"\",\r\n      text: \"Before you discuss ! i have to discuss something \",\r\n      date: Date.now(),\r\n      id: 6,\r\n      repliedTo: 1,\r\n    },\r\n\r\n    {\r\n      from: \"\",\r\n      text: \"I have something to discuss\",\r\n      date: Date.now(),\r\n      id: 3,\r\n    },\r\n    {\r\n      from: chattingWith?.id,\r\n      link: \"/profile/settings?goTo=3\",\r\n      templateName: \"interior Design\",\r\n      date: Date.now(),\r\n      id: 4,\r\n    },\r\n    {\r\n      from: chattingWith?.id,\r\n      date: Date.now(),\r\n      id: 5,\r\n      text: \"Try replying to this message for that double line error , it should work as expected , and bla bla bla bla blka blas ablas\",\r\n    },\r\n  ]);\r\n\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const chatBodyRef = useRef();\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n  const [isAtBottom, setisAtBottom] = useState(false);\r\n\r\n  //focusing the element on replying\r\n  const inputElement = document.getElementById(\"message\");\r\n  useEffect(() => {\r\n    if (replyingTo && inputElement) {\r\n      inputElement?.focus();\r\n    }\r\n  }, [replyingTo]);\r\n  //\r\n\r\n  const handleSendMessage = () => {\r\n    let obj = {\r\n      text: newMessage,\r\n      date: Date.now(),\r\n      id: `message-${Math.floor(Math.random() * 1000)?.toString(16)}`,\r\n      repliedTo: replyingTo?.id,\r\n    };\r\n    setMessages([...messages, obj]);\r\n    setNewMessage(\"\");\r\n    if (replyingTo) {\r\n      setReplyingTo(null);\r\n    }\r\n  };\r\n\r\n  const getRepliedTo = (id) => {\r\n    return [...messages]?.find((item) => item?.id === id);\r\n  };\r\n\r\n  //-------------------------------------------------------\r\n  useEffect(() => {\r\n    if (chatBodyRef.current) {\r\n      let scrollHeight = chatBodyRef.current?.scrollHeight;\r\n      chatBodyRef?.current?.scrollTo({\r\n        top: scrollHeight,\r\n        behaviour: \"smooth\",\r\n      });\r\n    }\r\n  }, [messages]);\r\n\r\n  const scrollListener = (e) => {\r\n    if (e?.scrollTop < e?.scrollHeight - e?.clientHeight) {\r\n      setisAtBottom(false);\r\n    } else setisAtBottom(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"chat-container \">\r\n        <div className=\"chat-container-header\">\r\n          <div\r\n            className=\"full-width d-flex align-items-center justify-content-between\"\r\n            style={{ padding: \"10px\" }}\r\n          >\r\n            <div className=\"d-flex\">\r\n              <UserAvatar\r\n                isOnline={chattingWith?.isOnline}\r\n                height={50}\r\n                width={50}\r\n                src={chattingWith?.photo}\r\n                style={{ margin: \"2px\" }}\r\n              />\r\n              <MessageOptionIcon\r\n                color={\"#555\"}\r\n                hoverColor={\"#999999\"}\r\n                className=\"cursor-pointer\"\r\n                onClick={() => {\r\n                  setOrderTemplateModalOpen(true);\r\n                }}\r\n              />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"color-7777 text-center m-0\">\r\n                {chattingWith?.name}\r\n              </h4>\r\n              <p className=\"m-0 color-7777 text-center \">\r\n                {chattingWith?.designation ?? \"Designer\"}\r\n              </p>\r\n            </div>\r\n            <Button\r\n              onClick={() => setisChatting(false)}\r\n              className=\"grey-btn-1 p-0 full-rounded border-none\"\r\n              style={{ height: \"50px\", width: \"50px\" }}\r\n            >\r\n              <RxCross2 size={50} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"chat-container-body d-flex flex-column py-3 px-2\"\r\n          ref={chatBodyRef}\r\n          style={{ gap: \"10px\" }}\r\n          onScroll={(e) => scrollListener(e?.target)}\r\n        >\r\n          {/* chat history data */}\r\n          <small className=\"f-4 d-block color-7777 text-end\">\r\n            {moment(new Date())?.subtract(1, \"day\")?.format(\"YYYY/MM/D ddd\")}\r\n          </small>\r\n          {messages?.map((messageObj, key) => {\r\n            if (messageObj?.templateName) {\r\n              return (\r\n                <div\r\n                  className={`d-flex full-width  align-items-center ${\r\n                    chattingWith?.id === messageObj?.from\r\n                      ? \"justify-content-start\"\r\n                      : \"justify-content-end\"\r\n                  }`}\r\n                >\r\n                  <Link\r\n                    to={messageObj?.link}\r\n                    className=\"text-decoration-none template\"\r\n                  >\r\n                    <OrderNowCard\r\n                      details={{ title: messageObj?.templateName }}\r\n                      isEditable={false}\r\n                    />\r\n                  </Link>\r\n                </div>\r\n              );\r\n            } else if (messageObj?.type === \"call\") {\r\n              return (\r\n                <div\r\n                  className={`d-flex full-width  align-items-center ${\r\n                    chattingWith?.id === messageObj?.from\r\n                      ? \"justify-content-start\"\r\n                      : \"justify-content-end\"\r\n                  }`}\r\n                >\r\n                  <CallBubble\r\n                    onReply={() =>\r\n                      setReplyingTo({\r\n                        ...messageObj,\r\n                        repliedTo: messageObj?.id,\r\n                        text: \"You were in a call \",\r\n                      })\r\n                    }\r\n                    state={messageObj?.state}\r\n                    timeOfCall={messageObj?.timeOfCall}\r\n                    type={\r\n                      messageObj?.from === chattingWith?.id\r\n                        ? \"recieved\"\r\n                        : \"sent\"\r\n                    }\r\n                  />\r\n                </div>\r\n              );\r\n            } else\r\n              return (\r\n                <div\r\n                  className={`d-flex  full-width align-items-center ${\r\n                    chattingWith?.id === messageObj?.from\r\n                      ? \"justify-content-start\"\r\n                      : \"justify-content-end\"\r\n                  }`}\r\n                >\r\n                  <ChatBubble\r\n                    repliedTo={getRepliedTo(messageObj?.repliedTo)}\r\n                    onReply={() => setReplyingTo(messageObj)}\r\n                    messageObj={messageObj}\r\n                    type={\r\n                      messageObj?.from === chattingWith?.id\r\n                        ? \"recieved\"\r\n                        : \"sent\"\r\n                    }\r\n                    key={key}\r\n                    chatter={{ name: \"You\" }}\r\n                    chattingWith={chattingWith}\r\n                  />\r\n                </div>\r\n              );\r\n          })}\r\n        </div>\r\n        <div className=\" chat-container-input d-flex  position-relative\">\r\n          {isAtBottom ? (\r\n            <Button\r\n              style={{ right: \"1%\", top: \"-40%\" }}\r\n              className=\"bg-transparent position-absolute p-0 border-none hover-color-cyan color-5555 \"\r\n            >\r\n              <IoIosAddCircleOutline size={30} />\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              onClick={() => {\r\n                if (chatBodyRef?.current) {\r\n                  chatBodyRef?.current?.scrollTo({\r\n                    top: chatBodyRef?.current?.scrollHeight,\r\n                    behaviour: \"smooth\",\r\n                  });\r\n                }\r\n              }}\r\n              style={{ right: \"1%\", top: \"-40%\", borderRadius: \"50%\" }}\r\n              className=\"grey-btn-1 p-0 position-absolute  border-none \"\r\n            >\r\n              <PiCaretDown size={30} />\r\n            </Button>\r\n          )}\r\n          <div className=\"full-width\">\r\n            {replyingTo && (\r\n              <Card className=\"m-1 reply-card\">\r\n                <div className=\"d-flex align-items-center justify-content-between\">\r\n                  <div\r\n                    style={{ gap: \"2px\" }}\r\n                    className=\"d-flex align-items-center\"\r\n                  >\r\n                    <div>\r\n                      <ReplyIcon size={20} />\r\n                    </div>\r\n                    <p className=\"m-0 color-9999 text-start\">\r\n                      {replyingTo?.text?.slice(0, 50)}\r\n                      {replyingTo?.text?.length > 50 ? \"....\" : null}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <CrossIcon size={20} onClick={() => setReplyingTo(false)} />\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            )}\r\n            <Input\r\n              type=\"textarea\"\r\n              className=\"border-none \"\r\n              id=\"message\"\r\n              style={{ caretColor: \"#00C8C8\", paddingLeft: \"8px\" }}\r\n              value={newMessage}\r\n              onChange={(e) => setNewMessage(e?.target?.value)}\r\n              onKeyDownCapture={(e) => {\r\n                if (e?.key?.toUpperCase() == \"ENTER\" && e?.shiftKey) {\r\n                  e?.preventDefault();\r\n                  setNewMessage(newMessage + \"\\n\");\r\n                } else {\r\n                  if (e?.key?.toUpperCase() == \"ENTER\") {\r\n                    e?.preventDefault();\r\n                    if (newMessage !== \"\") {\r\n                      handleSendMessage();\r\n                      setNewMessage(\"\");\r\n                    } else toast.error(\"Cannot send empty message\");\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"m-2\">\r\n            {chattingWith?.isOnline ? (\r\n              <VoiceCall\r\n                onCall={() => {}}\r\n                onCallSuccess={(timeOfCall) => {\r\n                  let obj = {\r\n                    index: callObj?.index,\r\n                    state: \"in-call\",\r\n                    timeOfCall: timeOfCall,\r\n                    type: \"call\",\r\n                  };\r\n                  let array = [...messages, obj];\r\n                  setMessages(array);\r\n                  setCallObj(obj);\r\n                }}\r\n              />\r\n            ) : (\r\n              <button\r\n                onClick={toggleBookModal}\r\n                className={`${\r\n                  isBooked ? \"orange-btn-1\" : \"cyan-btn\"\r\n                } full-rounded f-4 p-1 d-flex flex-column align-items-center justify-content-center`}\r\n                style={{ height: \"85px\", width: \"85px\", aspectRatio: 1 }}\r\n              >\r\n                <div>\r\n                  <IoAlarmOutline size={50} />\r\n                </div>\r\n                <small className=\"d-block\">\r\n                  {!isBooked ? \"Book\" : \"Booked\"}\r\n                </small>\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Booking\r\n        onBookingSuccess={() => setisBooked(true)}\r\n        isOpen={bookModalOpen}\r\n        toggle={toggleBookModal}\r\n      />\r\n      <OrderTemplateModal\r\n        isOpen={orderTemplateModalOpen}\r\n        toggle={() => setOrderTemplateModalOpen((prev) => !prev)}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatContainer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}